{"ast":null,"code":"import _classCallCheck from\"/Users/tjmercer/Desktop/pandora/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/tjmercer/Desktop/pandora/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/tjmercer/Desktop/pandora/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/tjmercer/Desktop/pandora/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _assertThisInitialized from\"/Users/tjmercer/Desktop/pandora/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Users/tjmercer/Desktop/pandora/node_modules/@babel/runtime/helpers/esm/inherits\";import React from\"react\";import{Map,GoogleApiWrapper,Marker,InfoWindow}from\"google-maps-react\";export var MapView=/*#__PURE__*/function(_React$Component){_inherits(MapView,_React$Component);function MapView(_props){var _this;_classCallCheck(this,MapView);_this=_possibleConstructorReturn(this,_getPrototypeOf(MapView).call(this,_props));_this.onMarkerClick=function(props,marker,e){_this.setState({selectedBus:props,activeMarker:marker,showingInfoWindow:true});};_this.onMapClicked=function(){if(_this.state.showingInfoWindow){_this.setState({showingInfoWindow:false,activeMarker:null});}};_this.state={selectedBus:null,activeMarker:null,showingInfoWindow:false};_this.onMarkerClick=_this.onMarkerClick.bind(_assertThisInitialized(_this));_this.onMapClicked=_this.onMapClicked.bind(_assertThisInitialized(_this));return _this;}_createClass(MapView,[{key:\"busInfoString\",value:function busInfoString(bus){return\"Bus number \"+bus[\"busNumber\"]+\" is currently at or approaching \"+bus[\"timepoint\"];}},{key:\"render\",value:function render(){var _this2=this;return React.createElement(Map,{google:this.props.google,zoom:10,style:{height:\"100vh\"},initialCenter:{lat:33.749,lng:-84.388},onClick:this.onMapClicked},this.props.buses.map(function(bus){return React.createElement(Marker,{position:{lat:bus.lat,lng:bus.lon},name:_this2.busInfoString(bus),onClick:_this2.onMarkerClick});}),React.createElement(InfoWindow,{marker:this.state.activeMarker,visible:this.state.showingInfoWindow},React.createElement(\"div\",null,React.createElement(\"h4\",null,this.state.selectedBus?this.state.selectedBus.name:\"\"))));}}]);return MapView;}(React.Component);export default GoogleApiWrapper({apiKey:\"AIzaSyB_Z9lTIAzbW2VBkebVJWWjGgTvJZLQk8o\"})(MapView);","map":{"version":3,"sources":["/Users/tjmercer/Desktop/pandora/src/subviews/MapView.jsx"],"names":["React","Map","GoogleApiWrapper","Marker","InfoWindow","MapView","props","onMarkerClick","marker","e","setState","selectedBus","activeMarker","showingInfoWindow","onMapClicked","state","bind","bus","google","height","lat","lng","buses","map","lon","busInfoString","name","Component","apiKey"],"mappings":"0sBAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,GAAT,CAAcC,gBAAd,CAAgCC,MAAhC,CAAwCC,UAAxC,KAA0D,mBAA1D,CAEA,UAAaC,CAAAA,OAAb,6EACE,iBAAYC,MAAZ,CAAmB,yCACjB,yEAAMA,MAAN,GADiB,MAqBnBC,aArBmB,CAqBH,SAACD,KAAD,CAAQE,MAAR,CAAgBC,CAAhB,CAAsB,CACpC,MAAKC,QAAL,CAAc,CACZC,WAAW,CAAEL,KADD,CAEZM,YAAY,CAAEJ,MAFF,CAGZK,iBAAiB,CAAE,IAHP,CAAd,EAKD,CA3BkB,OA6BnBC,YA7BmB,CA6BJ,UAAM,CACnB,GAAI,MAAKC,KAAL,CAAWF,iBAAf,CAAkC,CAChC,MAAKH,QAAL,CAAc,CACZG,iBAAiB,CAAE,KADP,CAEZD,YAAY,CAAE,IAFF,CAAd,EAID,CACF,CApCkB,CAEjB,MAAKG,KAAL,CAAa,CACXJ,WAAW,CAAE,IADF,CAEXC,YAAY,CAAE,IAFH,CAGXC,iBAAiB,CAAE,KAHR,CAAb,CAMA,MAAKN,aAAL,CAAqB,MAAKA,aAAL,CAAmBS,IAAnB,+BAArB,CACA,MAAKF,YAAL,CAAoB,MAAKA,YAAL,CAAkBE,IAAlB,+BAApB,CATiB,aAUlB,CAXH,wEAagBC,GAbhB,CAaqB,CACjB,MACE,cACAA,GAAG,CAAC,WAAD,CADH,CAEA,kCAFA,CAGAA,GAAG,CAAC,WAAD,CAJL,CAMD,CApBH,uCAuCW,iBACP,MACE,qBAAC,GAAD,EACE,MAAM,CAAE,KAAKX,KAAL,CAAWY,MADrB,CAEE,IAAI,CAAE,EAFR,CAGE,KAAK,CAAE,CACLC,MAAM,CAAE,OADH,CAHT,CAME,aAAa,CAAE,CAAEC,GAAG,CAAE,MAAP,CAAeC,GAAG,CAAE,CAAC,MAArB,CANjB,CAOE,OAAO,CAAE,KAAKP,YAPhB,EASG,KAAKR,KAAL,CAAWgB,KAAX,CAAiBC,GAAjB,CAAqB,SAAAN,GAAG,QACvB,qBAAC,MAAD,EACE,QAAQ,CAAE,CAAEG,GAAG,CAAEH,GAAG,CAACG,GAAX,CAAgBC,GAAG,CAAEJ,GAAG,CAACO,GAAzB,CADZ,CAEE,IAAI,CAAE,MAAI,CAACC,aAAL,CAAmBR,GAAnB,CAFR,CAGE,OAAO,CAAE,MAAI,CAACV,aAHhB,EADuB,EAAxB,CATH,CAgBE,oBAAC,UAAD,EACE,MAAM,CAAE,KAAKQ,KAAL,CAAWH,YADrB,CAEE,OAAO,CAAE,KAAKG,KAAL,CAAWF,iBAFtB,EAIE,+BACE,8BAAK,KAAKE,KAAL,CAAWJ,WAAX,CAAyB,KAAKI,KAAL,CAAWJ,WAAX,CAAuBe,IAAhD,CAAuD,EAA5D,CADF,CAJF,CAhBF,CADF,CA2BD,CAnEH,qBAA6B1B,KAAK,CAAC2B,SAAnC,EAsEA,cAAezB,CAAAA,gBAAgB,CAAC,CAC9B0B,MAAM,CAAE,yCADsB,CAAD,CAAhB,CAEZvB,OAFY,CAAf","sourcesContent":["import React from \"react\";\nimport { Map, GoogleApiWrapper, Marker, InfoWindow } from \"google-maps-react\";\n\nexport class MapView extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      selectedBus: null,\n      activeMarker: null,\n      showingInfoWindow: false\n    };\n\n    this.onMarkerClick = this.onMarkerClick.bind(this);\n    this.onMapClicked = this.onMapClicked.bind(this);\n  }\n\n  busInfoString(bus) {\n    return (\n      \"Bus number \" +\n      bus[\"busNumber\"] +\n      \" is currently at or approaching \" +\n      bus[\"timepoint\"]\n    );\n  }\n\n  onMarkerClick = (props, marker, e) => {\n    this.setState({\n      selectedBus: props,\n      activeMarker: marker,\n      showingInfoWindow: true\n    });\n  };\n\n  onMapClicked = () => {\n    if (this.state.showingInfoWindow) {\n      this.setState({\n        showingInfoWindow: false,\n        activeMarker: null\n      });\n    }\n  };\n\n  render() {\n    return (\n      <Map\n        google={this.props.google}\n        zoom={10}\n        style={{\n          height: \"100vh\"\n        }}\n        initialCenter={{ lat: 33.749, lng: -84.388 }}\n        onClick={this.onMapClicked}\n      >\n        {this.props.buses.map(bus => (\n          <Marker\n            position={{ lat: bus.lat, lng: bus.lon }}\n            name={this.busInfoString(bus)}\n            onClick={this.onMarkerClick}\n          />\n        ))}\n        <InfoWindow\n          marker={this.state.activeMarker}\n          visible={this.state.showingInfoWindow}\n        >\n          <div>\n            <h4>{this.state.selectedBus ? this.state.selectedBus.name : \"\"}</h4>\n          </div>\n        </InfoWindow>\n      </Map>\n    );\n  }\n}\n\nexport default GoogleApiWrapper({\n  apiKey: \"AIzaSyB_Z9lTIAzbW2VBkebVJWWjGgTvJZLQk8o\"\n})(MapView);\n"]},"metadata":{},"sourceType":"module"}