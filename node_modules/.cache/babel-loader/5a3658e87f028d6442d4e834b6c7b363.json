{"ast":null,"code":"import _classCallCheck from\"/Users/tjmercer/Desktop/pandora/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/tjmercer/Desktop/pandora/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/tjmercer/Desktop/pandora/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/tjmercer/Desktop/pandora/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _assertThisInitialized from\"/Users/tjmercer/Desktop/pandora/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Users/tjmercer/Desktop/pandora/node_modules/@babel/runtime/helpers/esm/inherits\";import React from\"react\";import _ from\"lodash\";import\"./RouteSelect.css\";var RouteSelect=/*#__PURE__*/function(_React$Component){_inherits(RouteSelect,_React$Component);function RouteSelect(props){var _this;_classCallCheck(this,RouteSelect);_this=_possibleConstructorReturn(this,_getPrototypeOf(RouteSelect).call(this,props));_this.state={busroute:\"\",buses:props.buses,selectedRoute:null};_this.onClick=_this.onClick.bind(_assertThisInitialized(_this));return _this;}_createClass(RouteSelect,[{key:\"fetchBuses\",value:function fetchBuses(){var _this2=this;if(!this.state.buses.length){fetch(\"http://developer.itsmarta.com/BRDRestService/RestBusRealTimeService/GetAllBus\").then(function(res){return res.json();}).then(function(json){return _this2.props.formatBuses(json);});}}},{key:\"onClick\",value:function onClick(event){event.preventDefault();this.props.selectRoute(event.target.outerText);if(this.state.selectedRoute){this.state.selectedRoute.classList.remove(\"selectedRoute\");}event.target.classList.add(\"selectedRoute\");this.setState({selectedRoute:event.target});}},{key:\"render\",value:function render(){var _this3=this;var busRoutes=[];if(this.props.buses.length){busRoutes=_.sortBy(_.uniqBy(this.props.buses,\"route\"),function(bus){return parseInt(bus.route,10);});}else{this.fetchBuses();}return React.createElement(\"div\",{className:\"listView\"},React.createElement(\"h3\",{className:\"listHeader\"},\"Select Route\"),React.createElement(\"div\",{className:\"scrollView\"},React.createElement(\"ul\",{value:\"all\",onClick:this.onClick,className:\"busRoute\",tabindex:\"1\"},\"All\"),busRoutes.map(function(busRoute){return React.createElement(\"ul\",{key:busRoute.route.toString(),onClick:_this3.onClick,className:\"busRoute\",tabindex:\"1\"},String(busRoute.route));})));}}]);return RouteSelect;}(React.Component);export default RouteSelect;","map":{"version":3,"sources":["/Users/tjmercer/Desktop/pandora/src/subviews/RouteSelect.jsx"],"names":["React","_","RouteSelect","props","state","busroute","buses","selectedRoute","onClick","bind","length","fetch","then","res","json","formatBuses","event","preventDefault","selectRoute","target","outerText","classList","remove","add","setState","busRoutes","sortBy","uniqBy","bus","parseInt","route","fetchBuses","map","busRoute","toString","String","Component"],"mappings":"0sBAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,CAAP,KAAc,QAAd,CACA,MAAO,mBAAP,C,GAEMC,CAAAA,W,iFACJ,qBAAYC,KAAZ,CAAmB,6CACjB,6EAAMA,KAAN,GACA,MAAKC,KAAL,CAAa,CAAEC,QAAQ,CAAE,EAAZ,CAAgBC,KAAK,CAAEH,KAAK,CAACG,KAA7B,CAAoCC,aAAa,CAAE,IAAnD,CAAb,CAEA,MAAKC,OAAL,CAAe,MAAKA,OAAL,CAAaC,IAAb,+BAAf,CAJiB,aAKlB,C,uEAEY,iBACX,GAAI,CAAC,KAAKL,KAAL,CAAWE,KAAX,CAAiBI,MAAtB,CAA8B,CAC5BC,KAAK,CACH,+EADG,CAAL,CAGGC,IAHH,CAGQ,SAAAC,GAAG,QAAIA,CAAAA,GAAG,CAACC,IAAJ,EAAJ,EAHX,EAIGF,IAJH,CAIQ,SAAAE,IAAI,QAAI,CAAA,MAAI,CAACX,KAAL,CAAWY,WAAX,CAAuBD,IAAvB,CAAJ,EAJZ,EAKD,CACF,C,wCAEOE,K,CAAO,CACbA,KAAK,CAACC,cAAN,GACA,KAAKd,KAAL,CAAWe,WAAX,CAAuBF,KAAK,CAACG,MAAN,CAAaC,SAApC,EACA,GAAI,KAAKhB,KAAL,CAAWG,aAAf,CAA8B,CAC5B,KAAKH,KAAL,CAAWG,aAAX,CAAyBc,SAAzB,CAAmCC,MAAnC,CAA0C,eAA1C,EACD,CACDN,KAAK,CAACG,MAAN,CAAaE,SAAb,CAAuBE,GAAvB,CAA2B,eAA3B,EACA,KAAKC,QAAL,CAAc,CAAEjB,aAAa,CAAES,KAAK,CAACG,MAAvB,CAAd,EACD,C,uCAEQ,iBACP,GAAIM,CAAAA,SAAS,CAAG,EAAhB,CACA,GAAI,KAAKtB,KAAL,CAAWG,KAAX,CAAiBI,MAArB,CAA6B,CAC3Be,SAAS,CAAGxB,CAAC,CAACyB,MAAF,CAASzB,CAAC,CAAC0B,MAAF,CAAS,KAAKxB,KAAL,CAAWG,KAApB,CAA2B,OAA3B,CAAT,CAA8C,SAAAsB,GAAG,CAAI,CAC/D,MAAOC,CAAAA,QAAQ,CAACD,GAAG,CAACE,KAAL,CAAY,EAAZ,CAAf,CACD,CAFW,CAAZ,CAGD,CAJD,IAIO,CACL,KAAKC,UAAL,GACD,CACD,MACE,4BAAK,SAAS,CAAC,UAAf,EACE,0BAAI,SAAS,CAAC,YAAd,iBADF,CAEE,2BAAK,SAAS,CAAC,YAAf,EACE,0BACE,KAAK,CAAE,KADT,CAEE,OAAO,CAAE,KAAKvB,OAFhB,CAGE,SAAS,CAAC,UAHZ,CAIE,QAAQ,CAAC,GAJX,QADF,CASGiB,SAAS,CAACO,GAAV,CAAc,SAAAC,QAAQ,QACrB,2BACE,GAAG,CAAEA,QAAQ,CAACH,KAAT,CAAeI,QAAf,EADP,CAEE,OAAO,CAAE,MAAI,CAAC1B,OAFhB,CAGE,SAAS,CAAC,UAHZ,CAIE,QAAQ,CAAC,GAJX,EAMG2B,MAAM,CAACF,QAAQ,CAACH,KAAV,CANT,CADqB,EAAtB,CATH,CAFF,CADF,CAyBD,C,yBA9DuB9B,KAAK,CAACoC,S,EAiEhC,cAAelC,CAAAA,WAAf","sourcesContent":["import React from \"react\";\nimport _ from \"lodash\";\nimport \"./RouteSelect.css\";\n\nclass RouteSelect extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { busroute: \"\", buses: props.buses, selectedRoute: null };\n\n    this.onClick = this.onClick.bind(this);\n  }\n\n  fetchBuses() {\n    if (!this.state.buses.length) {\n      fetch(\n        \"http://developer.itsmarta.com/BRDRestService/RestBusRealTimeService/GetAllBus\"\n      )\n        .then(res => res.json())\n        .then(json => this.props.formatBuses(json));\n    }\n  }\n\n  onClick(event) {\n    event.preventDefault();\n    this.props.selectRoute(event.target.outerText);\n    if (this.state.selectedRoute) {\n      this.state.selectedRoute.classList.remove(\"selectedRoute\");\n    }\n    event.target.classList.add(\"selectedRoute\");\n    this.setState({ selectedRoute: event.target });\n  }\n\n  render() {\n    let busRoutes = [];\n    if (this.props.buses.length) {\n      busRoutes = _.sortBy(_.uniqBy(this.props.buses, \"route\"), bus => {\n        return parseInt(bus.route, 10);\n      });\n    } else {\n      this.fetchBuses();\n    }\n    return (\n      <div className=\"listView\">\n        <h3 className=\"listHeader\">Select Route</h3>\n        <div className=\"scrollView\">\n          <ul\n            value={\"all\"}\n            onClick={this.onClick}\n            className=\"busRoute\"\n            tabindex=\"1\"\n          >\n            All\n          </ul>\n          {busRoutes.map(busRoute => (\n            <ul\n              key={busRoute.route.toString()}\n              onClick={this.onClick}\n              className=\"busRoute\"\n              tabindex=\"1\"\n            >\n              {String(busRoute.route)}\n            </ul>\n          ))}\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default RouteSelect;\n"]},"metadata":{},"sourceType":"module"}