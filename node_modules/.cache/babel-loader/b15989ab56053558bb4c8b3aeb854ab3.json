{"ast":null,"code":"import _classCallCheck from\"/Users/tjmercer/Desktop/pandora/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/tjmercer/Desktop/pandora/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/tjmercer/Desktop/pandora/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/tjmercer/Desktop/pandora/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _assertThisInitialized from\"/Users/tjmercer/Desktop/pandora/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Users/tjmercer/Desktop/pandora/node_modules/@babel/runtime/helpers/esm/inherits\";import React from\"react\";import RouteSelect from\"./subviews/RouteSelect\";import MapView from\"./subviews/MapView\";import fetch from\"node-fetch\";import FlexView from\"react-flexview\";var styles={width:\"400px\",height:\"400px\"};var MainView=/*#__PURE__*/function(_React$Component){_inherits(MainView,_React$Component);function MainView(props){var _this;_classCallCheck(this,MainView);_this=_possibleConstructorReturn(this,_getPrototypeOf(MainView).call(this,props));_this.state={allBuses:[],selectedBuses:[]};_this.selectRoute=_this.selectRoute.bind(_assertThisInitialized(_this));_this.formatBuses=_this.formatBuses.bind(_assertThisInitialized(_this));return _this;}_createClass(MainView,[{key:\"formatBuses\",value:function formatBuses(unfilteredBusData){var filteredBusData=unfilteredBusData.map(function(unfilteredBusDatum){return{route:unfilteredBusDatum[\"ROUTE\"],lat:unfilteredBusDatum[\"LATITUDE\"],lon:unfilteredBusDatum[\"LONGITUDE\"],timepoint:unfilteredBusDatum[\"TIMEPOINT\"],busNumber:unfilteredBusDatum[\"VEHICLE\"]};});this.setState({allBuses:filteredBusData,selectedBuses:filteredBusData});}},{key:\"selectRoute\",value:function selectRoute(route){if(route===\"All\"){this.setState({selectedBuses:this.state.allBuses});}else{var buses=this.state.allBuses.filter(function(bus){return bus.route===route;});this.setState({selectedBuses:buses});}}},{key:\"render\",value:function render(){return React.createElement(\"div\",{style:styles},React.createElement(FlexView,{hAlignContent:\"left\"},React.createElement(RouteSelect,{selectRoute:this.selectRoute,formatBuses:this.formatBuses,buses:this.state.allBuses}),React.createElement(\"div\",null,React.createElement(MapView,{buses:this.state.selectedBuses}))));}}]);return MainView;}(React.Component);export default MainView;","map":{"version":3,"sources":["/Users/tjmercer/Desktop/pandora/src/MainView.jsx"],"names":["React","RouteSelect","MapView","fetch","FlexView","styles","width","height","MainView","props","state","allBuses","selectedBuses","selectRoute","bind","formatBuses","unfilteredBusData","filteredBusData","map","unfilteredBusDatum","route","lat","lon","timepoint","busNumber","setState","buses","filter","bus","Component"],"mappings":"0sBAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,WAAP,KAAwB,wBAAxB,CACA,MAAOC,CAAAA,OAAP,KAAoB,oBAApB,CACA,MAAOC,CAAAA,KAAP,KAAkB,YAAlB,CACA,MAAOC,CAAAA,QAAP,KAAqB,gBAArB,CAEA,GAAMC,CAAAA,MAAM,CAAG,CACbC,KAAK,CAAE,OADM,CAEbC,MAAM,CAAE,OAFK,CAAf,C,GAKMC,CAAAA,Q,8EACJ,kBAAYC,KAAZ,CAAmB,0CACjB,0EAAMA,KAAN,GACA,MAAKC,KAAL,CAAa,CAAEC,QAAQ,CAAE,EAAZ,CAAgBC,aAAa,CAAE,EAA/B,CAAb,CAEA,MAAKC,WAAL,CAAmB,MAAKA,WAAL,CAAiBC,IAAjB,+BAAnB,CACA,MAAKC,WAAL,CAAmB,MAAKA,WAAL,CAAiBD,IAAjB,+BAAnB,CALiB,aAMlB,C,qEAEWE,iB,CAAmB,CAC7B,GAAMC,CAAAA,eAAe,CAAGD,iBAAiB,CAACE,GAAlB,CAAsB,SAAAC,kBAAkB,CAAI,CAClE,MAAO,CACLC,KAAK,CAAED,kBAAkB,CAAC,OAAD,CADpB,CAELE,GAAG,CAAEF,kBAAkB,CAAC,UAAD,CAFlB,CAGLG,GAAG,CAAEH,kBAAkB,CAAC,WAAD,CAHlB,CAILI,SAAS,CAAEJ,kBAAkB,CAAC,WAAD,CAJxB,CAKLK,SAAS,CAAEL,kBAAkB,CAAC,SAAD,CALxB,CAAP,CAOD,CARuB,CAAxB,CASA,KAAKM,QAAL,CAAc,CACZd,QAAQ,CAAEM,eADE,CAEZL,aAAa,CAAEK,eAFH,CAAd,EAID,C,gDAEWG,K,CAAO,CACjB,GAAIA,KAAK,GAAK,KAAd,CAAqB,CACnB,KAAKK,QAAL,CAAc,CAAEb,aAAa,CAAE,KAAKF,KAAL,CAAWC,QAA5B,CAAd,EACD,CAFD,IAEO,CACL,GAAMe,CAAAA,KAAK,CAAG,KAAKhB,KAAL,CAAWC,QAAX,CAAoBgB,MAApB,CAA2B,SAAAC,GAAG,QAAIA,CAAAA,GAAG,CAACR,KAAJ,GAAcA,KAAlB,EAA9B,CAAd,CACA,KAAKK,QAAL,CAAc,CAAEb,aAAa,CAAEc,KAAjB,CAAd,EACD,CACF,C,uCAEQ,CACP,MACE,4BAAK,KAAK,CAAErB,MAAZ,EACE,oBAAC,QAAD,EAAU,aAAa,CAAC,MAAxB,EACE,oBAAC,WAAD,EACE,WAAW,CAAE,KAAKQ,WADpB,CAEE,WAAW,CAAE,KAAKE,WAFpB,CAGE,KAAK,CAAE,KAAKL,KAAL,CAAWC,QAHpB,EADF,CAME,+BACE,oBAAC,OAAD,EAAS,KAAK,CAAE,KAAKD,KAAL,CAAWE,aAA3B,EADF,CANF,CADF,CADF,CAcD,C,sBAjDoBZ,KAAK,CAAC6B,S,EAoD7B,cAAerB,CAAAA,QAAf","sourcesContent":["import React from \"react\";\nimport RouteSelect from \"./subviews/RouteSelect\";\nimport MapView from \"./subviews/MapView\";\nimport fetch from \"node-fetch\";\nimport FlexView from \"react-flexview\";\n\nconst styles = {\n  width: \"400px\",\n  height: \"400px\"\n};\n\nclass MainView extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { allBuses: [], selectedBuses: [] };\n\n    this.selectRoute = this.selectRoute.bind(this);\n    this.formatBuses = this.formatBuses.bind(this);\n  }\n\n  formatBuses(unfilteredBusData) {\n    const filteredBusData = unfilteredBusData.map(unfilteredBusDatum => {\n      return {\n        route: unfilteredBusDatum[\"ROUTE\"],\n        lat: unfilteredBusDatum[\"LATITUDE\"],\n        lon: unfilteredBusDatum[\"LONGITUDE\"],\n        timepoint: unfilteredBusDatum[\"TIMEPOINT\"],\n        busNumber: unfilteredBusDatum[\"VEHICLE\"]\n      };\n    });\n    this.setState({\n      allBuses: filteredBusData,\n      selectedBuses: filteredBusData\n    });\n  }\n\n  selectRoute(route) {\n    if (route === \"All\") {\n      this.setState({ selectedBuses: this.state.allBuses });\n    } else {\n      const buses = this.state.allBuses.filter(bus => bus.route === route);\n      this.setState({ selectedBuses: buses });\n    }\n  }\n\n  render() {\n    return (\n      <div style={styles}>\n        <FlexView hAlignContent=\"left\">\n          <RouteSelect\n            selectRoute={this.selectRoute}\n            formatBuses={this.formatBuses}\n            buses={this.state.allBuses}\n          />\n          <div>\n            <MapView buses={this.state.selectedBuses} />\n          </div>\n        </FlexView>\n      </div>\n    );\n  }\n}\n\nexport default MainView;\n"]},"metadata":{},"sourceType":"module"}